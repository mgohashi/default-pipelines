apiVersion: v1
kind: Template
metadata:
  annotations:
    description: Build Pipeline
    iconClass: icon-jboss
    tags: java,springboot,fis,eap,secret,build
  name: build-pipeline
objects:
 - apiVersion: v1
   kind: "BuildConfig"
   apiVersion: "v1"
   metadata:
     name: "${APP_NAME}${SUFIX}"
   spec:
     source:
       git:
         uri: "http://gogs-cicd-tools.cloud.sfb/banestes/default-pipelines"
     strategy:
       jenkinsPipelineStrategy:
         jenkinsfilePath: ${JENKINS_FILE}
         env:
         - name: "NAMESPACE_DEV"
           value: ${NAMESPACE_BASE}-dev
         - name: "NAMESPACE_HML"
           value: ${NAMESPACE_BASE}-hml
         - name: "NAMESPACE_PRD"
           value: ${NAMESPACE_BASE}
         - name: "APP_NAME"
           value: ${APP_NAME}
         - name: "APP_GIT_URL"
           value: ${APP_GIT_URL}
         - name: "BRANCH"
           value: ${BRANCH}
         - name: "VERSION"
           value: "${VERSION}"
         - name: "DEBUG_WORKFLOW"
           value: "${DEBUG_WORKFLOW}"
parameters:
- description: Application Name
  displayName: Application Name
  name: APP_NAME
- description: Namespace
  displayName: Namespace
  name: NAMESPACE_BASE
- description: Git URL
  displayName: Git URL
  name: APP_GIT_URL
- description: Jenkins Files
  displayName: Jenkins Files
  name: JENKINS_FILE
- description: Sufix
  displayName: Sufix
  name: SUFIX
  value: ''
- description: Branch
  displayName: Branch
  name: BRANCH
  value: 'develp'
- description: Version
  displayName: Version
  name: VERSION
  value: 'XX'
- description: Debug workflow (Y/N)
  displayName: Debug workflow
  name: DEBUG_WORKFLOW
  value: 'N'